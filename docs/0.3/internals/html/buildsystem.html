<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>AgentXcpp: The Build System</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="doc_logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">AgentXcpp
   &#160;<span id="projectnumber">Version:0.3</span>
   </div>
   <div id="projectbrief">Internals Documentation</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('buildsystem.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">The Build System </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>AgentXcpp uses <a href="http://www.scons.org">SCons</a> as an easy-to-use build system. Therefore, building agentXcpp is a one-step operation: simply invoke <code>scons</code> at the command line, and the library will be built. In addition, SCons provides operations to clean up the build directory, make parallel builds and more.</p>
<h1><a class="anchor" id="howtobuild"></a>
How to build AgentXcpp</h1>
<p>A short introduction of the prerequisites and the build process of agentXcpp is given in <a class="el" href="installation.html">Building and Installing AgentXcpp</a>. If you want to hack on agentXcpp itself, some more commands become handy. You can easily (re)build agentXcpp with</p>
<pre class="fragment"># While in top-level directory: Build agentXcpp
scons
</pre><p>SCons keeps track of all dependencies, for example included headers, and rebuilds only the parts that it really need to. It even might skip the linker step if compilation generated unchanged object files. To build only part of the project, use can use</p>
<pre class="fragment"># While in src/: Build only the library
scons -u
# While in doc/: Build only the documentation
scons -u
</pre><p>The <code>-u</code> parameter tells SCons to walk the directory tree up to find the SConsctruct file. Another useful command is</p>
<pre class="fragment"># Remove all files created by SCons
scons -c
</pre><p>This removes the files which were produced by calling <code>scons</code>. Files installed with <code>scons install</code> are left alone. Note that this cleaning command is rarely needed. Unlike autotools or the like, SCons doesn't get stuck if dependencies change.</p>
<h1><a class="anchor" id="howitworks"></a>
How Scons works in agentXcpp</h1>
<p>AgentXcpp includes two SCons tools located in <code>site_scons/site_tools/</code>: qt4 and doxygen. Both tools were not created by the agentXcpp developer and both have other license terms. However, when distributing agentXcpp under its license terms, these tools can safely distributed along, as long as they are changed under their own terms.</p>
<p>The root directory contains a <code>SConstruct</code> file, and each subdirectory has a <code>SConscript</code> file to control the build process inside that directory.</p>
<h2><a class="anchor" id="sconstruct"></a>
The top-level SConstruct</h2>
<p>The top-level <code>SConstruct</code> file defines a number of command-line options using the <code>AddOption()</code> function, providing a description (for the <code>-h</code> switch) and a default value. These options become available in addition to the standard SCons options and can be seen with <code> scons -h</code>. Then, the given options are read from the command line with <code>GetOption()</code> and the proper actions are taken.</p>
<p>The following options are currently provided:</p><ul>
<li><code>-<code>-prefix=PREFIX</code></code> </li>
<li><code>-<code>-libdir=LIBDIR</code></code> </li>
<li><code>-<code>-includedir=INCLUDEDIR</code></code> </li>
<li><code>-<code>-docdir=DOCDIR</code></code> </li>
</ul>
<p>which define the following SCons environment variables:</p><ul>
<li><code>libdir</code>: where the library gets installed</li>
<li><code>includedir</code>: where the headers get installed</li>
<li><code>docdir</code>: where the API documentation gets installed</li>
<li><code>prefix</code>: used to build up default values for the above options</li>
</ul>
<p>When a relative path is given for any of these options, it is converted to an absolute path, because SCons functions are always invoked from the top-level directory, while the <code>scons</code> invocation may happen in a subdirectory.</p>
<p>After processing the command line, the SConscript invokes <code>getVersion()</code> from the <code>getversion.py</code> script to determine the version from which agentXcpp is built. The version string is added as environment variable <code>'revision'</code>.</p>
<p>Next, the SConscript checks for some tools and provides useful error messages if something is missing.</p>
<p>Finally, the subsidiary SConscript's are invoked while exporting the environment to them.</p>
<h2><a class="anchor" id="src_sconscript"></a>
src/SConscript</h2>
<p>The <code>SConscript</code> in src/ builds the library and provides the install target for it. Further, the library is defined as one of the default targets.</p>
<p>If g++ is detected, the SConscript also adds some compiler flags to produce more warnings.</p>
<h2><a class="anchor" id="doc_sconscript"></a>
doc/SConscript</h2>
<p>The <code>SConscript</code> in doc/ builds the doxygen documentations (API and internals). It uses the SCons doxygen tool to do so. This tool is included in the agentXcpp source repository and was extended to support the <code>DOXYPROJECTNUMBER</code> environment variable, which appends the <code>PROJECT_NUMBER</code> option to the doxyfile before running doxygen. This way, the version information can be built into the documentation.</p>
<p>For API documentation, the SConscript defines an install target. The internals documentation is not intended to be installed in a system, because the audience are developers who like to work on the agentXcpp source code.</p>
<p>Further, clean targets are defined, and default targets are specified so that the documentations are built by default. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.8 </li>
  </ul>
</div>
</body>
</html>
